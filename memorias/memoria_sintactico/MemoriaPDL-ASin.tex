\documentclass[12pt,twoside,letterpaper]{article}
%NOTE: This report format is 
\setlength{\footskip}{1.5cm}

\newcommand{\reporttitle}{Procesadores de Lenguajes: Memoria del Proyecto}
\newcommand{\reportauthorOne}{Jose Luis Prado Sierra }
\newcommand{\cidOne}{220070}
\newcommand{\reportauthorTwo}{Alejandro Gragera Serradilla }
\newcommand{\cidTwo}{22M043}
\newcommand{\reportauthorThree}{Antonio Bielza Díez }
\newcommand{\cidThree}{22M049}
\newcommand{\reporttype}{Coursework}

% include files that load packages and define macros
\input{includes} % various packages needed for maths etc.
\input{notation} % short-hand notation and macros


%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\raggedbottom
\begin{document}
% front page
\input{titlepage}


%%%%%%%%%%%%%%%%%%%%%%%%%%% table of content
%If a table of content is needed, simply uncomment the following lines
\tableofcontents
\newpage

%%%%%%%%%%%%%%%%%%%%%%%%%%%% Main document
%\section*{Note:}
%\emph{This document is intended to provide a sample structure for the reports in ME303 at the University of Waterloo. }

\section{Analizador Sintáctico}

Durante el desarrollo del Analizador Sintáctico hemos descrito una serie de objetos y estructuras matemáticas indispensables para que su diseño, desarrollo y función final cumplan con las expectativas de un Procesador de Lenguajes.

\subsection{Gramática}

La gramática es la estructura matemática que define el lenguaje a generar, en nuestros caso es para una versión reducida de JS. Definir la gramática es una forma de estructurar por tanto el lenguaje y asegurarnos de que vamos a generar solo lo que queremos.
\\
\\
Hemos definido las siguientes reglas:
\begin{itemize}[label={}, itemsep=0.0em, topsep=0.5em]
    \item $S \to ~delS~|~+A~|~\&B~|~`C~|~dD~|~lF~|~\_F~|~/G~|~=~|~,~|~;~|~<~|~(~|~)~|~\{~|~\}$
    \item $A \to ~=~|~\lambda$
    \item $B \to ~\&$
    \item $C \to ~cC~|~`$
    \item $D \to ~dD~|~.E~|~\lambda$
    \item $E \to ~dE~|~d$
    \item $F \to ~lF~|~dF~|~\_F~|~\lambda$
    \item $G \to ~/H$
    \item $H \to ~c_2H~|~\text{\textbackslash n}S$
\end{itemize}
\vspace{1em}
Los conjuntos definidos para el desarrollo de la gramática y del resto de la práctica son: 
\begin{itemize}[label={}, itemsep=0.0em, topsep=0.5em]
    \item Conjunto l: representa cualquier letra.
    \item Conjunto d: representa cualquier dígito.
    \item Conjunto c: representa cualquier caracter.
    \item Conjunto c$_2$: representa cualquier caracter sin \textbackslash n.
\end{itemize}

\newpage
\subsection{Acciones Semánticas}

Las acciones semánticas son una serie de acciones que se realizan entre las transiciones del autómata que permiten realizar diferentes funciones como por ejemplo ir generando un string para cuando detectamos una cadena.
\\
\\
Las acciones semánticas que hemos definido para nuestro proyecto son:
\begin{itemize}[label={-}, itemsep=0.0em, topsep=0.5em]
    \item 0:0 Leer
    \item 0:18 Leer, gentoken($<$COMMA, $>$)
    \item 0:19 Leer, gentoken($<$SEMICOLON, $>$)
    \item 0:20 Leer, gentoken($<$OPPAR, $>$)
    \item 0:21 Leer, gentoken($<$CLPAR, $>$)
    \item 0:22 Leer, gentoken($<$OPBRA, $>$)
    \item 0:23 Leer, gentoken($<$CLBRA, $>$)
    \item 0:1 Leer
    \item 1:6 gentoken($<$SUM, $>$)
    \item 1:24 Leer, gentoken($<$EQ, $>$)
    \item 0:2 Leer
    \item 2:7 Leer, gentoken($<$AND, $>$)
    \item 0:3 Leer, $str=''$
    \item 3:3 Leer, $str=str + c$
    \item 3:8 Leer, gentoken($<$STRING, str$>$)
    \item 0:4 Leer, $num=d$
    \item 4:4 Leer, $num = num*10 + d$
    \item 4:10 gentoken($<$INTCONST, num$>$) 
    \item 4:9 Leer, $cont=1$
    \item 9:11 Leer, $num = num*10 + d$, $cont++$
    \item 11:11 Leer, $num = num*10 + d$, $cont++$
    \item 11:12 $num = num*10^{-cont}$, gentoken($<$REALCONST, num$>$)
    \item 0:14 Leer
    \item 0:15 Leer
    \item 15:15 Leer
    \item 15:0 Leer
    \item 0:5 Leer, $id=c$
    \item 5:5 Leer, $id=id + c$
    \item 5:13
    \vspace{-0.2cm}
    \begin{verbatim} 
    if(id in palabrasReservadas)
        posTS = insertTS(id)
        gentoken(<toUpper(id), posTS>)
    else
        posTS = insertTS(id)
        gentoken(<ID, posTS>)
    \end{verbatim}
\end{itemize}


\subsection{Errores}

Todo buen procesador de lenguajes debe de avisar al usuario de si existe algún error y además es capaz de tratar todos los posibles errores para una ejecución robusta y comprensible. 
\\
Sin embargo para esta entrega no es necesario que sean descriptivos pero si han de ser reconocidos y clasificados.
\\
\\
Hemos detectado los siguientes casos capaces de generar errores:
\begin{itemize}[itemsep=0.0em, topsep=0.5em]
    \item \textbf{Cadena mal cerrada:} Al iniciar una cadena si queda mal cerrada (Ej. 'Hola buenas tardes).
    \item \textbf{ID incorrecto:} Al generar o utilizar un ID si los caracteres que lo componen no son correctos.
    \item \textbf{Caracter no reconocido:} Si se recibe un caracter no válido en el estado inicial.
    \item \textbf{Operador lógico incorrecto:} Si se pone un operador lógico (como \&\&) de forma incorrecta (Ej. \&).
    \item \textbf{Comentario de línea mal iniciado:} Al iniciar un comentario de línea incorrectamente (Ej. /Hola buenas tardes).
    \item \textbf{Entero demasiado grande:} Al declarar un entero mayor que 32767.
    \item \textbf{Real demasiado grande:} Al declarar un real mayor que 117549436.
    \item \textbf{Cadena demasiado grande:} Al declarar una cadena de más de 64 caracteres.
\end{itemize}

\newpage
\section{Tabla de Símbolos}

La tabla de símbolos es una estructura de datos que contiene información adicional sobre los tokens cuyo atributo es su posición dentro de ella.
\\
\\
El diseño elegido es una pila de diccionarios en la cual cada diccionario contiene la información extra del token (actualmente vacía) y que, al ser insertados, se devuelve la posición que han recibido dentro de ella, para posteriormente generar el token correctamente.
\\
\\
En nuestro caso se asigna la posición dentro de la tabla de forma lineal, el primer elemento recibe la primera posición y la enésima inserción recibe la enésima posición.

\newpage
\section{Anexo}

\subsection{Casos Correctos}

\subsubsection{Caso Correcto}
\begin{itemize}[label={-}, itemsep=-1em, topsep=0.5em, parsep=-0.2em]
    \item \textbf{Código:}
    \begin{verbatim} 
let int a_53f = 3;
let boolean bb;
let float fl = 3.5;
let int c;
let float fl2;
c = a_53f + 9;
fl2 = fl + 3.0;
let string str = 'Supercalifragilisticoespialidoso';
    \end{verbatim}
    \item \textbf{Archivo de Tokens:}\begin{verbatim}
<LET,>
<INT,>
<ID,0>
<EQ,>
<INTCONST,3>
<SEMICOLON,>
<LET,>
<BOOLEAN,>
<ID,1>
<SEMICOLON,>
<LET,>
<FLOAT,>
<ID,2>
<EQ,>
<REALCONST,3.5>
<SEMICOLON,>
<LET,>
<INT,>
<ID,3>
<SEMICOLON,>
<LET,>
<FLOAT,>
<ID,4>
<SEMICOLON,>
<ID,5>
<EQ,>
<ID,6>
<SUM,>
<INTCONST,9>
<SEMICOLON,>
<ID,7>
<EQ,>
<ID,8>
<SUM,>
<REALCONST,3.0>
<SEMICOLON,>
<LET,>
<STRING,>
<ID,9>
<EQ,>
<STR,"Supercalifragilisticoespialidoso">
<SEMICOLON,>
<EOF,>
    \end{verbatim}
    \item \textbf{Archivo de Tabla de Símbolos:}\begin{verbatim}
CONTENIDOS DE LA TABLA # 1:
* LEXEMA : 'a_53f'
  Atributos:
--------- ---------
* LEXEMA : 'bb'
  Atributos:
--------- ---------
* LEXEMA : 'fl'
  Atributos:
--------- ---------
* LEXEMA : 'c'
  Atributos:
--------- ---------
* LEXEMA : 'fl2'
  Atributos:
--------- ---------
* LEXEMA : 'str'
  Atributos:
--------- ---------
    \end{verbatim}
\end{itemize}

\subsubsection{Caso Correcto}
\begin{itemize}[label={-}, itemsep=-1em, topsep=0.5em, parsep=-0.2em]
    \item \textbf{Código:}
    \begin{verbatim} 
let int s = 2; // Esto es una prueba de comentario 4hjdsh2&&ndj!
s = s + 3; // Sigue siendo una prueba jdlwn;eldr4,4nc,erioe4nx,(·!N$"()E·/$"N
let boolean bs = s && 4;
    \end{verbatim}
    \item \textbf{Archivo de Tokens:}
    \begin{verbatim} 
<LET,>
<INT,>
<ID,0>
<EQ,>
<INTCONST,2>
<SEMICOLON,>
<ID,1>
<EQ,>
<ID,2>
<SUM,>
<INTCONST,3>
<SEMICOLON,>
<LET,>
<BOOLEAN,>
<ID,3>
<EQ,>
<ID,4>
<AND,>
<INTCONST,4>
<SEMICOLON,>
<EOF,>
    \end{verbatim}
    \item \textbf{Archivo de Tabla de Símbolos:}
    \begin{verbatim} 
CONTENIDOS DE LA TABLA # 1:
* LEXEMA : 's'
  Atributos:
--------- ---------
* LEXEMA : 'bs'
  Atributos:
--------- ---------
    \end{verbatim}
\end{itemize}

\newpage
\subsubsection{Caso Correcto}
\begin{itemize}[label={-}, itemsep=-1em, topsep=0.5em, parsep=-0.2em]
    \item \textbf{Código:}
    \begin{verbatim} 
function void sql {
	lt boolean b = true;
		let int dl = 7;
	if (b == true) {
		dl = dl + 2;
		write('Sí');
	}
	else return;
}
    \end{verbatim}
    \item \textbf{Archivo de Tokens:}
    \begin{verbatim} 
<FUNCTION,>
<VOID,>
<ID,0>
<OPBRA,>
<ID,1>
<BOOLEAN,>
<ID,2>
<EQ,>
<TRUE,>
<SEMICOLON,>
<LET,>
<INT,>
<ID,3>
<EQ,>
<INTCONST,7>
<SEMICOLON,>
<IF,>
<OPPAR,>
<ID,4>
<EQ,>
<EQ,>
<TRUE,>
<CLPAR,>
<OPBRA,>
<ID,5>
<EQ,>
<ID,6>
<SUM,>
<INTCONST,2>
<SEMICOLON,>
<WRITE,>
<OPPAR,>
<STR,"Sí">
<CLPAR,>
<SEMICOLON,>
<CLBRA,>
<ELSE,>
<RETURN,>
<SEMICOLON,>
<CLBRA,>
<EOF,>
    \end{verbatim}
    \item \textbf{Archivo de Tabla de Símbolos:}
    \begin{verbatim} 
CONTENIDOS DE LA TABLA # 1:
* LEXEMA : 'sql'
  Atributos:
--------- ---------
* LEXEMA : 'lt'
  Atributos:
--------- ---------
* LEXEMA : 'b'
  Atributos:
--------- ---------
* LEXEMA : 'dl'
  Atributos:
--------- ---------
    \end{verbatim}
\end{itemize}

\newpage
\subsection{Casos Erróneos}
\subsubsection{Caso Erróneo}
\begin{itemize}[label={-}, itemsep=-1em, topsep=0.5em, parsep=-0.2em]
    \item \textbf{Código:}
    \begin{verbatim} 
let int _ser = 45;
let float fl = 564.;
let boolean bl = true;
if (bl & false) int = 3;
    \end{verbatim}
    \item \textbf{Errores:}
    \begin{verbatim} 
Carácter ilegal '.' en línea 2 
Carácter ilegal '&' en línea 4
    \end{verbatim}
\end{itemize}

\subsubsection{Caso Erróneo}
\begin{itemize}[label={-}, itemsep=-1em, topsep=0.5em, parsep=-0.2em]
    \item \textbf{Código:}
    \begin{verbatim} 
let boolean xl3_ = false; / Doremifasollasido
let int del = 3;
del += 4;
if (xl3 == false) write('A'),
    \end{verbatim}
    \item \textbf{Error:}
    \begin{verbatim} 
    Carácter ilegal '/' en línea 1
    \end{verbatim}
\end{itemize}

\subsubsection{Caso Erróneo}
\begin{itemize}[label={-}, itemsep=-1em, topsep=0.0em, parsep=-0.2em]
    \item \textbf{Código:}
    \begin{verbatim} 
let int 3m = 56;
let float ad&d = 3.4;
if (ad&d < 3m) write('Error);
return ad&d;
    \end{verbatim}
    \item \textbf{Errores:}
    \begin{verbatim} 
Carácter ilegal '&' en línea 2
Carácter ilegal '&' en línea 3
Carácter ilegal "'" en línea 3
Carácter ilegal '&' en línea 4
    \end{verbatim}
\end{itemize}


\begin{figure}[h!]
\centering
\includegraphics[width=0.45\textwidth]{../figures/goose.png} 
\caption{Barnacla canadiense intencional.}
\end{figure}

\end{document}
%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
